<?php

function govi_sdqs_block_info() {
    $block = array();

    $block['govi_sdqs_block'] = array(
        'info' => 'Govi SDQS',
        'cache' => DRUPAL_CACHE_PER_PAGE,
    );

    return $block;
}

function govi_sdqs_block_view($delta = '') {

    $block = array();

    $block['subject'] = 'Servicio al ciudadano';
    $block['content'] = govi_sdqs_block_content();

    return $block;
}

function govi_sdqs_block_content() {

    return theme('govi_sdqs_display');
}

function govi_sdqs_theme($existing, $type, $theme, $path) {

    return array(
        'govi_sdqs_display' => array(
            'variables' => array('uno' => '1', 'dos' => '2', 'tres' => '3'),
            'template' => 'templates/sdqs',
        ),
    );
}

function theme_govi_sdqs_display($variables) {

    $output = array();

    $output['#theme'] = 'govi_sdqs';
    $output['#type'] = 'markup';
    $output['#variables'] = $variables;

    return $output;
}

function govi_sdqs_default_wsclient_service() {

    $service = new WSClientServiceDescription();

    $service->name = 'sdqs';
    $service->label = 'DescripciÃ³n del web service proporcionado por el Sistema Distrital de Quejas y Soluciones';
    // URL Temporal mientras se conoce el origen del recurso del SDQS
    $service->url = 'http://graphical.weather.gov/xml/SOAP_server/ndfdXMLserver.php?wsdl';
    $service->type = 'soap';

    try {
        $service->endpoint()->initializeMetaData();
        $services[$service->name] = $service;
    }
    catch (WSClientException $e) {
        watchdog('wsclient', $e->__toString());
    }

    return $services;
}
